const ColorPicker={collections:["#000","#808080","#C0C0C0","#0000FF","#000080","#008080","#008000","#00FF00","#00FFFF","#FFFF00","#FF0000","#FF00FF","#808000","#800080","#800000"],brightness:0,saturation:0,transparency:0,initial_rgb:[255,0,0],rgb:[255,0,0],init:function(){window.addEventListener("load",this.initEl)},initEl:function(){new MutationObserver((t=>{document.querySelectorAll('input[type="colorpicker"]:not([uk-model])').forEach(((t,r)=>{t.setAttribute("uk-model","true"),t.setAttribute("onchange","ColorPicker.changeInputValue(this);"+t.getAttribute("onchange")),t.outerHTML=`<div data-colorpicker>${t.outerHTML}<div style="background-color:${t.getAttribute("value")};" data-colorpicker-selector uk-toggle="target: [colorpicker-container]" onclick="ColorPicker.click(this)"></div></div>`}))})).observe(document,{childList:!0,subtree:!0}),document.body.innerHTML+=`\n    <div><div class="colorpicker-container" colorpicker-container uk-dropdown="mode: click; pos: bottom-left;">\n      <ul class="uk-subnav uk-subnav-pill" uk-switcher>\n        <li><a uk-icon="settings"></a></li>\n        <li><a uk-icon="tag"></a></li>\n      </ul>\n      <ul class="uk-switcher uk-margin">\n        <li class="colorpicker-bars">\n          <div class="colorpicker-bar" data-colorpicker-rgb><input data-colorpicker-rgb-input value="0" min="0" max="1535" step="1" oninput="ColorPicker.changeRGB(this.value)" type="range"></div>\n          <div class="colorpicker-bar" data-colorpicker-brightness><input data-colorpicker-brightness-input value="0" min="0" max="255" step="1" type="range" oninput="ColorPicker.changeBrightness(this.value)"></div>\n          <div class="colorpicker-bar" data-colorpicker-saturation><input data-colorpicker-saturation-input value="0" min="0" max="255" step="1" type="range" oninput="ColorPicker.changeSaturation(this.value)"></div>\n          <div class="colorpicker-bar" data-colorpicker-transparency><input data-colorpicker-transparency-input value="1" min="0" max="100" step="1" type="range" oninput="ColorPicker.changeTransparency(this.value)"><div class="colorpicker-transparency-check"></div></div>\n        </li>\n        <li class="colorpicker-radius">${this.ColorPicker.getColorRadiosDom()}</li>\n      </ul>\n    </div></div>`},click:function(t){this.colorpicker_el=t.previousElementSibling,this.colorselector_el=t,this.colorpicker_el.value=this.colorpicker_el.value?this.colorpicker_el.value:"#ff0000",this.changeInputValue(this.colorpicker_el)},rgbToHEX:function(t){const r=function(t){var r=t.toString(16);return 1==r.length?"0"+r:r};return`#${r(t[0])}${r(t[1])}${r(t[2])}`},render:function(){this.renderColorPickerRange(),this.renderColorPickerGradient();const t=`rgba(${this.color[0]},${this.color[1]},${this.color[2]},${Math.round(100-this.transparency)/100})`;this.colorselector_el.style.background=t,this.colorpicker_el.value=0==this.transparency?this.rgbToHEX(this.color):t},renderColorPickerGradient:function(){document.querySelectorAll("[data-colorpicker-rgb]")[0].style.background=`linear-gradient(90deg, rgba(${255-this.brightness},0,0,1) 0%, rgba(${255-this.brightness},${255-this.brightness},0,1) calc(100% / 6), rgba(0,${255-this.brightness},0,1) calc(100% / 3), rgba(0,${255-this.brightness},${255-this.brightness},1) 50%, rgba(0,0,${255-this.brightness},1) calc(200% / 3), rgba(${255-this.brightness},0,${255-this.brightness},1) calc(500% / 6), rgba(${255-this.brightness},0,0,1) 100%)`,document.querySelectorAll("[data-colorpicker-brightness]")[0].style.background=`linear-gradient(90deg, rgba(${this.rgb[0]},${this.rgb[1]},${this.rgb[2]},1) 0%, rgba(0,0,0,1) 100%)`,document.querySelectorAll("[data-colorpicker-saturation]")[0].style.background=`linear-gradient(90deg, rgba(${this.rgb[0]*(1-this.brightness/255)},${this.rgb[1]*(1-this.brightness/255)},${this.rgb[2]*(1-this.brightness/255)},1) 0%, rgba(${255-this.brightness},${255-this.brightness},${255-this.brightness},1) 100%)`,document.querySelectorAll("[data-colorpicker-transparency]")[0].style.background=`linear-gradient(90deg, rgba(${this.color[0]},${this.color[1]},${this.color[2]},1) 0%, rgba(${this.color[0]},${this.color[1]},${this.color[2]},0) 100%)`},renderColorPickerRange:function(){document.querySelector("[data-colorpicker-rgb-input]").value=this.getValuefromRGB(this.rgb),document.querySelector("[data-colorpicker-brightness-input]").value=this.brightness,document.querySelector("[data-colorpicker-saturation-input]").value=this.saturation,document.querySelector("[data-colorpicker-transparency-input]").value=this.transparency},changeRadioValue:function(t){this.colorpicker_el.value=t,this.changeInputValue(this.colorpicker_el)},changeInputValue:function(t){this.colorpicker_el=t,this.colorselector_el=t.nextElementSibling,this.colorselector_el.style.backgroundColor=t.value;var r=window.getComputedStyle(t.nextElementSibling).backgroundColor;r.match(/rgba/)?(this.color=r.replace(/(rgba|\(|\)|\s)/g,"").split(",").map(Number),this.transparency=100*(1-this.color[3]),this.color.pop()):r.match(/rgb/)?this.color=r.replace(/(rgb|\(|\)|\s)/g,"").split(",").map(Number):(this.color=[255,255,255],this.transparency=0),this.brightness=this.getBrightness(this.color),this.saturation=this.getSaturation(this.color),this.rgb=this.getRGB(this.color),this.render()},changeRGB:function(t){this.rgb=this.getRGBfromValue(Number(t)),this.color=this.getColor(this.rgb,this.saturation,this.brightness),this.render()},changeBrightness:function(t){this.brightness=Number(t),this.color=this.getColor(this.rgb,this.saturation,this.brightness),this.render()},changeSaturation:function(t){this.saturation=Number(t),this.color=this.getColor(this.rgb,this.saturation,this.brightness),this.render()},changeTransparency:function(t){this.transparency=Number(t),this.color=this.getColor(this.rgb,this.saturation,this.brightness),this.render()},getValuefromRGB:function(t){const r=t[0],i=t[1],e=t[2];return e<=i&&i<=r?i:e<=r&&r<=i?511-r:r<=e&&e<=i?e+512:r<=i&&i<=e?1023-i:i<=r&&r<=e?r+1024:i<=e&&e<=r?1535-e:void 0},getRGBfromValue:function(t){var r;return t<256?r=[255,t-0,0]:t<512?r=[511-t,255,0]:t<768?r=[0,255,t-512]:t<1024?r=[0,1023-t,255]:t<1280?r=[t-1024,0,255]:t<1536&&(r=[255,0,1535-t]),r},getRGB:function(t){var r=this.getBrightness(t),i=this.getSaturation(t),e=[];return t[0]==t[1]&&t[1]==t[2]?e=this.initial_rgb:t.forEach((function(o,n){e.push(),e[n]=Math.round(t[n]/(1-r/255)),255!=e[n]&&(e[n]=Math.round((e[n]-i)/(1-i/255)))})),e},getBrightness:function(t){return 255-Math.max(t[0],t[1],t[2])},getSaturation:function(t){return 0==Math.max(t[0],t[1],t[2])?255:Math.min(t[0],t[1],t[2])/Math.max(t[0],t[1],t[2])*255},getColor:function(t,r,i){var e=[];return t.forEach((function(t,o){t+=r/255*(255-t),t*=1-i/255,t=Math.round(t),e.push(t)})),e},getColorRadiosDom:function(){var t="";return this.collections.forEach((function(r,i){t+=`<input type="radio" name="colorpicker-radio" value="${r}" onchange="ColorPicker.changeRadioValue(this.value)" style="background: ${r};box-shadow: 0 0 0 2px ${r};">`})),t}};window.ColorPicker=ColorPicker,ColorPicker.init();
